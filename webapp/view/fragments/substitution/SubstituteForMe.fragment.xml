<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    name="z.wf.zwfmanagement.view.fragments.substitution.SubstituteForMe"
>
    <IconTabFilter
        id="tabIncoming"
        text="{i18n>substTabIncoming}"
        icon="sap-icon://incoming-call"
        key="incoming"
    >
        <Table
            id="tableIncoming"
            items="{
                path: '/Substitutions',
                parameters: {
                    $select: 'UserSubstitutedBy,UserSubstitutedFor,BeginDate,EndDate,SubstitutionProfile,RuleStatus,SubstituteFullName,OwnerFullName,SubstitutionType,Direction,Active'
                }
            }"
            sticky="ColumnHeaders"
            growing="true"
            growingThreshold="20"
            noDataText="{i18n>substNoData}"
            class="sapUiSmallMargin"
        >
            <columns>
                <Column width="12em">
                    <Text text="{i18n>colOwnerName}" />
                </Column>
                <Column width="12em">
                    <Text text="{i18n>colTaskGroup}" />
                </Column>
                <Column width="10em">
                    <Text text="{i18n>colStartDate}" />
                </Column>
                <Column width="10em">
                    <Text text="{i18n>colEndDate}" />
                </Column>
                <Column width="8em">
                    <Text text="{i18n>substModePlanned}" />
                </Column>
                <Column
                    width="8em"
                    hAlign="Center"
                >
                    <Text text="{i18n>colStatus}" />
                </Column>
                <Column
                    width="6em"
                    hAlign="End"
                >
                    <Text text="" />
                </Column>
            </columns>
            <items>
                <ColumnListItem>
                    <cells>
                        <Link
                            text="{OwnerFullName}"
                            press=".onShowOwnerInfo"
                            class="sapUiTinyMarginEnd sapUiTextBold"
                        />
                        <Text text="{SubstitutionProfile}" />
                        <Text
                            text="{
                                parts: ['SubstitutionType', 'BeginDate'],
                                formatter: '.formatDateOrNA'
                            }"
                        />
                        <Text
                            text="{
                                parts: ['SubstitutionType', 'EndDate'],
                                formatter: '.formatDateOrNA'
                            }"
                        />
                        <Text
                            text="{
                                path: 'SubstitutionType',
                                formatter: '.formatSubstType'
                            }"
                        />
                        <ObjectStatus
                            state="{= ${Active} === true ? 'Success' : 'Error' }"
                            icon="{= ${Active} === true ? 'sap-icon://status-positive' : 'sap-icon://status-inactive' }"
                        />
                        <HBox
                            justifyContent="End"
                            alignItems="Center"
                        >
                            <Switch
                                state="{
                                    path: 'Active',
                                    type: 'sap.ui.model.odata.type.Boolean'
                                }"
                                customTextOn=" "
                                customTextOff=" "
                                change=".onToggleActive"
                            />
                        </HBox>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </IconTabFilter>
</core:FragmentDefinition>
