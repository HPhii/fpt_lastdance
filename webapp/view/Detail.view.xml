<mvc:View
    displayBlock="true"
    controllerName="z.wf.zwfmanagement.controller.Detail"
    height="100%"
    xmlns="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:m="sap.m"
    xmlns:form="sap.ui.layout.form"
>
    <ObjectPageLayout
        id="DetailObjectPageLayout"
        showTitleInHeaderContent="true"
        alwaysShowContentHeader="false"
        preserveHeaderStateOnScroll="false"
        headerContentPinnable="true"
        isChildPage="true"
        upperCaseAnchorBar="false"
        showFooter="true"
    >
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <expandedHeading>
                    <m:VBox>
                        <m:Title
                            text="{WorkItemText}"
                            wrapping="true"
                            class="sapUiSmallMarginEnd"
                        />
                        <m:Text text="{businessModel>PurchaseOrderType_Text}" />
                    </m:VBox>
                </expandedHeading>

                <snappedHeading>
                    <m:VBox>
                        <m:Title
                            text="{businessModel>PurchaseOrder}"
                            wrapping="true"
                        />
                        <m:Text text="{businessModel>PurchaseOrderType_Text}" />
                    </m:VBox>
                </snappedHeading>

                <navigationActions>
                    <m:OverflowToolbarButton
                        type="Transparent"
                        icon="sap-icon://full-screen"
                        press=".handleFullScreen"
                        tooltip="Enter Full Screen Mode"
                    />
                    <m:OverflowToolbarButton
                        type="Transparent"
                        icon="sap-icon://exit-full-screen"
                        press=".handleExitFullScreen"
                        tooltip="Exit Full Screen Mode"
                    />
                    <m:OverflowToolbarButton
                        type="Transparent"
                        icon="sap-icon://decline"
                        press=".handleClose"
                        tooltip="Close column"
                    />
                </navigationActions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>

        <headerContent>
            <m:FlexBox
                busy="{detailView>/headerBusy}"
                wrap="Wrap"
                fitContainer="true"
                alignItems="Stretch"
            >
                <m:Avatar
                    displaySize="L"
                    displayShape="Square"
                    class="sapUiSmallMarginEnd"
                />
                <m:VBox
                    justifyContent="Center"
                    class="sapUiSmallMarginEnd"
                >
                    <m:Label text="{i18n>detailHeaderStatusLabel}" />
                    <m:Text
                        text="{businessModel>PurchasingDocumentStatusName}"
                    />
                </m:VBox>
                <m:VBox
                    justifyContent="Center"
                    class="sapUiSmallMarginEnd"
                >
                    <m:Label text="{i18n>detailHeaderPurOrderDateLabel}" />
                    <m:Text
                        text="{
                            path: 'businessModel>PurchaseOrderDate',
                            type: 'sap.ui.model.type.Date', 
                            formatOptions: {
                                pattern: 'dd.MM.yyyy'
                            }
                        }"
                    />
                </m:VBox>
                <m:VBox
                    justifyContent="Center"
                    class="sapUiSmallMarginEnd"
                >
                    <m:Label text="{i18n>detailHeaderNetValueLabel}" />
                    <m:ObjectNumber
                        number="{businessModel>PurchaseOrderNetAmount}"
                        unit="{businessModel>DocumentCurrency}"
                        emphasized="false"
                    />
                </m:VBox>
            </m:FlexBox>
        </headerContent>

        <sections>
            <ObjectPageSection
                title="{i18n>detailInfoTitle}"
                busy="{detailView>/bodyBusy}"
            >
                <subSections>
                    <ObjectPageSubSection title="{i18n>detailInfoTitle}">
                        <blocks>
                            <m:VBox alignItems="Start">
                                <m:Title
                                    text="{i18n>detailInfoBasicDataTitle}"
                                />
                                <form:SimpleForm
                                    editable="false"
                                    layout="ResponsiveGridLayout"
                                    labelSpanXL="4"
                                    labelSpanL="4"
                                    labelSpanM="4"
                                    labelSpanS="12"
                                    emptySpanXL="0"
                                    emptySpanL="0"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="3"
                                    columnsL="3"
                                    columnsM="2"
                                >
                                    <form:content>
                                        <m:Label
                                            text="{i18n>detailInfoDocTypeLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>PurchaseOrderType_Text}"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoCurrencyLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>DocumentCurrency}"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoSupplierLabel}"
                                        />
                                        <m:Link
                                            text="{businessModel>SupplierName} ({businessModel>Supplier})"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoLanguageKeyLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>Language}"
                                        />
                                    </form:content>
                                </form:SimpleForm>
                            </m:VBox>
                            <m:VBox alignItems="Start">
                                <m:Title
                                    text="{i18n>detailInfoOrganizationTitle}"
                                />
                                <form:SimpleForm
                                    editable="false"
                                    layout="ResponsiveGridLayout"
                                    labelSpanXL="4"
                                    labelSpanL="4"
                                    labelSpanM="4"
                                    labelSpanS="12"
                                    emptySpanXL="0"
                                    emptySpanL="0"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="3"
                                    columnsL="3"
                                    columnsM="2"
                                >
                                    <form:content>
                                        <m:Label
                                            text="{i18n>detailInfoPurGroupLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>PurchasingGroupName}"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoCompanyCodeLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>CompanyCodeName} ({businessModel>CompanyCode})"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoPurOrgLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>PurchasingOrganizationName}"
                                        />
                                    </form:content>
                                </form:SimpleForm>
                            </m:VBox>
                            <m:VBox alignItems="Start">
                                <m:Title text="{i18n>detailInfoFurtherTitle}" />
                                <form:SimpleForm
                                    editable="false"
                                    layout="ResponsiveGridLayout"
                                    labelSpanXL="4"
                                    labelSpanL="4"
                                    labelSpanM="4"
                                    labelSpanS="12"
                                    emptySpanXL="0"
                                    emptySpanL="0"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="3"
                                    columnsL="3"
                                    columnsM="2"
                                >
                                    <form:content>
                                        <m:Label
                                            text="{i18n>detailInfoCreatedByLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>CreatedByUser}"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoApprovalStatusLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>PurchasingDocumentStatusName}"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoPurOrderDateLabel}"
                                        />
                                        <m:Text
                                            text="{path: 'businessModel>PurchaseOrderDate', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy'}}"
                                        />

                                        <m:Label
                                            text="{i18n>detailInfoApproverNameLabel}"
                                        />
                                        <m:Text
                                            text="{businessModel>UserFullName}"
                                        />
                                    </form:content>
                                </form:SimpleForm>
                            </m:VBox>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>

            <ObjectPageSection
                title="{i18n>detailItemTitle}"
                busy="{detailView>/bodyBusy}"
            >
                <subSections>
                    <ObjectPageSubSection title="{i18n>detailItemTitle} (1)">
                        <blocks>
                            <m:Table
                                items="{businessModel>to_PurchaseOrderItem}"
                                class="sapUiResponsiveMargin"
                                width="auto"
                            >
                                <m:columns>
                                    <m:Column>
                                        <m:Text
                                            text="{i18n>detailItemNumber}"
                                        />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text
                                            text="{i18n>detailItemCategory}"
                                        />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text
                                            text="{i18n>detailItemMaterial}"
                                        />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text
                                            text="{i18n>detailItemShortText}"
                                        />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text
                                            text="{i18n>detailItemMaterialGroup}"
                                        />
                                    </m:Column>
                                    <m:Column>
                                        <m:Text text="{i18n>detailItemPlant}" />
                                    </m:Column>
                                    <m:Column hAlign="End">
                                        <m:Text
                                            text="{i18n>detailItemOrderQuantity}"
                                        />
                                    </m:Column>
                                    <m:Column hAlign="End">
                                        <m:Text
                                            text="{i18n>detailItemNetOrderPrice}"
                                        />
                                    </m:Column>
                                </m:columns>
                                <m:items>
                                    <m:ColumnListItem type="Active">
                                        <m:cells>
                                            <m:Text
                                                text="{businessModel>PurchaseOrderItem}"
                                            />
                                            <m:Text
                                                text="{businessModel>PurchaseOrderItemCategory_Text}"
                                            />
                                            <m:Text
                                                text="{businessModel>Material}"
                                            />
                                            <m:Text
                                                text="{businessModel>PurchaseOrderItemText}"
                                            />
                                            <m:Text
                                                text="{businessModel>MaterialGroup_Text}"
                                            />
                                            <m:Text
                                                text="{businessModel>Plant_Text}"
                                            />
                                            <m:ObjectNumber
                                                number="{businessModel>OrderQuantity}"
                                                unit="{businessModel>PurchaseOrderQuantityUnit}"
                                            />
                                            <m:ObjectNumber
                                                number="{businessModel>NetAmount}"
                                                unit="{businessModel>DocumentCurrency}"
                                            />
                                        </m:cells>
                                    </m:ColumnListItem>
                                </m:items>
                            </m:Table>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>

            <ObjectPageSection title="{i18n>detailItemLimitTitle}">
                <subSections>
                    <ObjectPageSubSection title="{i18n>detailItemLimitTitle}">
                        <blocks>
                            <m:Text text="No limit items available" />
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
        </sections>

        <footer>
            <m:OverflowToolbar>
                <m:ToolbarSpacer />
                <m:Button
                    text="{i18n>buttonApprove}"
                    type="Accept"
                    press=".onApproveAction"
                    visible="{__OperationControl/approve}"
                />
                <m:Button
                    text="{i18n>buttonReject}"
                    type="Reject"
                    press=".onRejectAction"
                    visible="{__OperationControl/reject}"
                />
                <m:Button
                    text="{i18n>buttonClaim}"
                    type="Emphasized"
                    press=".onClaimAction"
                    visible="{__OperationControl/claim}"
                />
                <m:Button
                    text="{i18n>buttonForward}"
                    type="Default"
                    press=".onForwardAction"
                    visible="{__OperationControl/forward}"
                />
                <m:Button
                    text="{i18n>buttonRelease}"
                    type="Default"
                    press=".onReleaseAction"
                    visible="{__OperationControl/release}"
                />
                <m:Button
                    text="{i18n>buttonSuspend}"
                    type="Default"
                    press=".onSuspendAction"
                    visible="{__OperationControl/suspend}"
                />
            </m:OverflowToolbar>
        </footer>
    </ObjectPageLayout>
</mvc:View>
